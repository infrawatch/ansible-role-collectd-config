---
- name: Converge
  hosts: all
  roles:
    - role: "{{ playbook_dir }}/../../../collectd-config-ansible-role"
  vars:
        collectd_conf_output_dir: "/etc/collectd.d"
        collectd_plugins:
          # There are some undefined vars in the template that are causing
          # rendering to fail, these will be updated
          - amqp1
          # collectd image doesn't recognise capabilities plugin
          # - capabilities
          - ceph
          - connectivity
          - contextswitch
          - cpu
          - cpufreq
          - cpusleep
          - csv
          - df
          - disk
          - dns
          - ethstat
          - exec
          - hddtemp
          - hugepages
          - intel_pmu
          - intel_rdt
          - interface
          - ipc
          # The rendered conf file is not syntactically correct yet
          # - ipmi
          - irq
          - load
          - logfile
          - memory
          - netlink
          - network
          - numa
          - ntpd
          - numa
          - ovs_stats
          - ping
          - processes
          - procevent
          - smart
          - syslog
          - swap
          - unixsock
          - uptime
          - uuid
          - virt
          - vmem
          - write_http
